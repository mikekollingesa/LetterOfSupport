function saveIfBusinessUnitIsSet(executionContext) {
    var formContext = executionContext.getFormContext();

    
    // Retrieve the current user's Business Unit
    Xrm.WebApi.retrieveRecord("systemuser", Xrm.Page.context.getUserId(), "?$select=businessunitid").then(
        function (result) {
            if (result.businessunitid) {
                // Overwrite the Owning Business Unit field
                formContext.getAttribute("owningbusinessunit").setValue([
                    { id: result.businessunitid, entityType: "businessunit", name: "" }
                ]);
                console.log("Owning Business Unit updated to: " + result.businessunitid);

                // Save the form to trigger the plugin
                formContext.data.entity.save();
            }
        },
        function (error) {
            console.log("Error retrieving user's business unit: " + error.message);
        }
    );

   
    // Check if Owning Business Unit is filled
    var owningBusinessUnit = formContext.getAttribute("owningbusinessunit").getValue();
    
    if (owningBusinessUnit) {
        console.log("Owning Business Unit is set, forcing save...");
        formContext.data.entity.save();
    }
}