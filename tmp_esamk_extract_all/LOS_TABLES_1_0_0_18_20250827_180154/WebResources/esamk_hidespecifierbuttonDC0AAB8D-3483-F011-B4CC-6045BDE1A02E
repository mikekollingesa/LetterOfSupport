// === CONFIG ===
var BUTTON_LABEL = "Change Specifiers";   // The exact button label
var USER_TYPE_ATTR = "esamk_jsusertype";  // Field schema name
var ESA_VALUE = 305290000;                // Option set value for ESA

function hideChangeSpecifiers(executionContext) {
  var fc = executionContext.getFormContext();
  var val = fc.getAttribute(USER_TYPE_ATTR)?.getValue();

  console.log("[CmdHide] UserType =", val);

  if (val !== ESA_VALUE) {
    var root = window.top.document;
    var buttons = Array.from(root.querySelectorAll("button,[role='menuitem']"));

    buttons.forEach(function (btn) {
      var label = (btn.innerText || btn.getAttribute("aria-label") || "").trim();
      if (label === BUTTON_LABEL) {
        btn.style.display = "none";
        btn.style.visibility = "hidden";
        btn.setAttribute("aria-hidden", "true");
        btn.setAttribute("disabled", "true");
        console.log("[CmdHide] Hiding button:", label);
      }
    });
  }
}



function showIfESA(primaryControl) {
  var fc = primaryControl;
  var v = fc.getAttribute("esamk_jsusertype")?.getValue();
  return v === 305290000; // ESA
}
